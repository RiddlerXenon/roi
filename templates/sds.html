<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Stochastic Diffusion Search (SDS)</title>
  <link rel="stylesheet" href="../static/css/styles.css">
  <style>
    .description-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #2a5d31;
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      padding: 12px 16px;
      font-size: 14px;
      z-index: 1000;
    }
    .description-btn:hover {
      background: #3a7d41;
    }
    
    #descriptionModal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }
    
    #descriptionModal.active {
      display: flex;
    }
    
    .description-content {
      background: #222;
      border-radius: 10px;
      padding: 30px;
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      color: #eee;
    }
    
    .description-close {
      position: absolute;
      top: 15px;
      right: 20px;
      background: none;
      border: none;
      color: #ccc;
      font-size: 24px;
      cursor: pointer;
    }
    
    .description-close:hover {
      color: white;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <div class="controls" id="controls"></div>
  
  <button class="description-btn" onclick="openDescription()">üìñ –û–ø–∏—Å–∞–Ω–∏–µ</button>
  
  <div id="descriptionModal">
    <div class="description-content">
      <button class="description-close" onclick="closeDescription()">‚úï</button>
      <h2>–°—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫–∏–π –¥–∏—Ñ—Ñ—É–∑–∏–æ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ (SDS)</h2>
      <div id="latexContent">
        <p>–°—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫–∏–π –¥–∏—Ñ—Ñ—É–∑–∏–æ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ ‚Äî —ç—Ç–æ –º–µ—Ç–∞—ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ–º —Ä–µ–∫—Ä—É—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.</p>
        
        <h3>–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å:</h3>
        <p><strong>–§–∞–∑–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</strong></p>
        <p>–ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç $i$ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –≤ —Å–≤–æ–µ–π –ø–æ–∑–∏—Ü–∏–∏:</p>
        <p>$$h_i = f(\vec{x}_i) + \varepsilon_i, \quad \varepsilon_i \sim \mathcal{N}(0, \sigma^2)$$</p>
        
        <p><strong>–§–∞–∑–∞ –¥–∏—Ñ—Ñ—É–∑–∏–∏:</strong></p>
        <p>–ê–≥–µ–Ω—Ç—ã –∫–æ–º–º—É–Ω–∏—Ü–∏—Ä—É—é—Ç —Å–æ–≥–ª–∞—Å–Ω–æ –º–æ–¥–µ–ª–∏:</p>
        <p>$$p(\text{–∞–≥–µ–Ω—Ç } i \text{ –∞–∫—Ç–∏–≤–µ–Ω}) = \begin{cases} 
        1 & \text{–µ—Å–ª–∏ } h_i \geq \theta \\
        0 & \text{–∏–Ω–∞—á–µ}
        \end{cases}$$</p>
        
        <p>–≥–¥–µ $\theta$ ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥.</p>
        
        <p><strong>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π:</strong></p>
        <p>–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –≤—ã–±–∏—Ä–∞—é—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ $j$ –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç –ø–æ–∑–∏—Ü–∏—é:</p>
        <p>$$\vec{x}_i^{(t+1)} = \vec{x}_j^{(t)} + \vec{\xi}, \quad \vec{\xi} \sim \mathcal{N}(0, \sigma^2 I)$$</p>
        
        <p><strong>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —à—É–º (Simulated Annealing):</strong></p>
        <p>$$\sigma(t) = \sigma_0 \cdot \gamma^t, \quad 0 < \gamma < 1$$</p>
        
        <h3>–ê–ª–≥–æ—Ä–∏—Ç–º:</h3>
        <ol>
          <li>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è $N$ –∞–≥–µ–Ω—Ç–æ–≤ –≤ —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö</li>
          <li>–û—Ü–µ–Ω–∫–∞ —Ñ–∏—Ç–Ω–µ—Å–∞ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤</li>
          <li>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤</li>
          <li>–î–∏—Ñ—Ñ—É–∑–∏—è: –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –≤—ã–±–∏—Ä–∞—é—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö</li>
          <li>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤</li>
          <li>–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —à–∞–≥–æ–≤ 2-5 –¥–æ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏</li>
        </ol>
        
        <h3>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</h3>
        <ul>
          <li><strong>–°–∞–º–æ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:</strong> –ê–≥–µ–Ω—Ç—ã —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –∫–ª–∞—Å—Ç–µ—Ä—ã</li>
          <li><strong>–†–æ–±–∞—Å—Ç–Ω–æ—Å—Ç—å:</strong> –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —à—É–º—É –≤ —Ü–µ–ª–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏</li>
          <li><strong>–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:</strong> –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞</li>
        </ul>
        
        <p>SDS —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è –º–Ω–æ–≥–æ–º–æ–¥–∞–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞ –≤ –∑–∞—à—É–º–ª—ë–Ω–Ω—ã—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞—Ö.</p>
      </div>
    </div>
  </div>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };

    function openDescription() {
      document.getElementById('descriptionModal').classList.add('active');
      if (window.MathJax) {
        MathJax.typesetPromise();
      }
    }

    function closeDescription() {
      document.getElementById('descriptionModal').classList.remove('active');
    }
  </script>

  <script type="module">
    import { initSDS } from "../static/js/sds.js";

    const canvas = document.getElementById("canvas");
    const controlsContainer = document.getElementById("controls");
    
    const { params, createControls } = initSDS(canvas, {
      N: 50,
      func: 'twopeaks',
      sigma: 0.1,
      stepsPerFrame: 1,
      restartProb: 0.1,
      showHeatmap: true,
      showTraj: false,
      showBest: true,
      anneal: false
    });

    // –°–æ–∑–¥–∞–µ–º –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    createControls(controlsContainer);
  </script>
</body>
</html>
